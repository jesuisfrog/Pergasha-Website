<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="../pergasha.css">
    <link rel="shortcut icon" href="../assets/icons/pergasha-icon.ico"/>

    <title>Characters - Pergasha</title>
</head>
<body>


    <header>

        <nav class="navbar navbar-dark navbar-expand-lg">
            <div class="navbar-brand  mr-4">
                <img id="dreadful-logo" src="../assets/logos/dreadful_odysseys_pergasha_logo-dark_theme.png">
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="../pergasha.html">Home</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Player Options
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <a class="dropdown-item" href="classes.html">Classes</a>
                      <a class="dropdown-item" href="races.html">Races</a>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="feats.html">Feats</a>
                      <a class="dropdown-item" href="training.html">Training</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="psionics.html">Psionics</a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      References
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <a class="dropdown-item" href="characters.html">Characters</a>
                      <a class="dropdown-item" href="glyphs.html">Glyphs</a>
                      <a class="dropdown-item" href="items.html">Items</a>
                      <a class="dropdown-item" href="locations.html">Locations</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="rules.html">Rules</a>
                </li>
                <!-- <li class="nav-item">
                    <a class="nav-link" href="admin.html">Admin</a>
                </li> -->
            </ul>
            </div>
          </nav>

    </header>

    <div class="d-flex flex-column" id="character-container">   
      <h2 class="text-center mb-1 mt-3">Characters</h2>

      <!-- <div class="d-flex flex-column" id="filters"> -->
        <span class="text-center mb-1 mt-1">Name</span>
        <form class="form-inline  align-self-center mb-2">
          <input class="form-control" type="search" placeholder="Name" aria-label="Search" id="name-filter">
        </form>
        <div class="row justify-content-center align-self-center m-3 btn-group btn-group-toggle" id="filters">
          <button type="button" class="btn btn-primary btn-xs reset-btn " id="reset">Reset</button>
          <button type="button" class="btn btn-outline-dark btn-xs andOr-btn" id="and" data-toggle="button" aria-pressed="false">And</button>
          <button type="button" class="btn btn-outline-dark btn-xs andOr-btn active" id="or" data-toggle="button" aria-pressed="true">Or</button>

          <div style="border-left: 3px solid red;"></div> 

          <button type="button" class="btn btn-outline-secondary btn-xs btn-tag " id="cloud" data-toggle="button" aria-pressed="false">Cloud Tribe</button>
          <button type="button" class="btn btn-outline-secondary btn-xs btn-tag " id="fire" data-toggle="button" aria-pressed="false">Fire Tribe</button>
          <button type="button" class="btn btn-outline-secondary btn-xs btn-tag " id="gem" data-toggle="button" aria-pressed="false">Gem Tribe</button>
          <button type="button" class="btn btn-outline-secondary btn-xs btn-tag " id="ormican" data-toggle="button" aria-pressed="false">Ormican</button>
          <button type="button" class="btn btn-outline-secondary btn-xs btn-tag " id="sand" data-toggle="button" aria-pressed="false">Sand Tribe</button>
          <button type="button" class="btn btn-outline-secondary btn-xs btn-tag " id="stone" data-toggle="button" aria-pressed="false">Stone Tribe</button>
          <button type="button" class="btn btn-outline-secondary btn-xs btn-tag " id="storm" data-toggle="button" aria-pressed="false">Storm Tribe</button>
          <button type="button" class="btn btn-outline-secondary btn-xs btn-tag " id="tribless" data-toggle="button" aria-pressed="false">Tribeless</button>

          <button type="button" class="btn btn-outline-info btn-xs btn-tag " id="lizardfolk" data-toggle="button" aria-pressed="false">Lizardfolk</button>
          <button type="button" class="btn btn-outline-info btn-xs btn-tag " id="pergashan" data-toggle="button" aria-pressed="false">Pergashan</button>
          <button type="button" class="btn btn-outline-info btn-xs btn-tag " id="touched-kin" data-toggle="button" aria-pressed="false">Touched-kin</button>
          <button type="button" class="btn btn-outline-info btn-xs btn-tag " id="other" data-toggle="button" aria-pressed="false">Other Race</button>

        </div>
 
  <div class="row justify-content-center " id="cards-container">

    <div class="flip-card m-2 gem pergashan">
      <div class="flip-card-inner">
        <div class="flip-card-front">
          <img src="../assets/characters/eoni.png" style="height: 380px; width: 300px;" alt="Eoni">
          <span class="character-name">Eoni</span>
          <div class="character-tag text-center">
            <span class="badge badge-secondary tribe-tag">Gem Tribe</span>
            <span class="badge badge-info race-tag">Pergashan</span>
          </div>
        </div>
        <div class="flip-card-back">
          <h4>Eoni</h4>
          <p class="p-1" style="font-size: 0.9rem;">Description/Bio</p>
        </div>
      </div>
    </div> 

    <div class="flip-card m-2 ormican touched-kin">
      <div class="flip-card-inner">
        <div class="flip-card-front">
          <img src="../assets/characters/barashtu.png" style="height: 380px; width: 300px;" >
          <span class="character-name">Barashtu</span>
          <div class="text-center">
            <span class="badge badge-secondary">Ormican</span>
            <span class="badge badge-info">Touched-kin</span>
          </div>
        </div>
        <div class="flip-card-back">
          <h4>Barashtu-kal-ammi</h4>
          <i>High Skald</i>
          <p class="p-1" style="font-size: 0.9rem;">A well-traveled storyteller and hunter of lost secrets from the fallen empire that once inhabited these lands, Barashtu is an individual filled with knowledge. They are also an incredibly powerful psionic, capable of many feats due to the psicrystal shards that glitter across their body. Their long history of travels has left plenty of secrets, though, and the depth of their involvement with the Ormicans is yet to be revealed...</p>
        </div>
      </div>
    </div> 

    <div class="flip-card m-2 sand touched-kin">
      <div class="flip-card-inner">
        <div class="flip-card-front">
          <img src="../assets/characters/kalar.png" style="height: 380px; width: 300px;" >
          <span class="character-name">Kalar</span>
          <div class="character-tag text-center">
            <span class="badge badge-secondary tribe-tag">Sand Tribe</span>
            <span class="badge badge-info race-tag">Touched-kin</span>
          </div>
        </div>
        <div class="flip-card-back">
          <h4>Kalar</h4>
          <i>High Roaster</i>
          <p class="p-1" style="font-size: 0.9rem;">Description/Bio</p>
        </div>
      </div>
    </div> 

    <div class="flip-card m-2 sand touched-kin">
      <div class="flip-card-inner">
        <div class="flip-card-front">
          <img src="https://via.placeholder.com/380x300.png?text=Valar" style="height: 380px; width: 300px;" >
          <span class="character-name">Valar</span>
          <div class="character-tag text-center">
            <span class="badge badge-secondary tribe-tag">Sand Tribe</span>
            <span class="badge badge-info race-tag">Touched-kin</span>
          </div>
        </div>
        <div class="flip-card-back">
          <h4>Valar Nightwing</h4>
          <p class="p-1" style="font-size: 0.9rem;">Description/Bio</p>
        </div>
      </div>
    </div>

    <div class="flip-card m-2 tribeless Lizardfolk">
      <div class="flip-card-inner">
        <div class="flip-card-front">
          <img src="https://via.placeholder.com/380x300.png?text=Jax" style="height: 380px; width: 300px;" >
          <span class="character-name">Jax</span>
          <div class="character-tag text-center">
            <span class="badge badge-secondary">Tribeless</span>
            <span class="badge badge-info">Lizardfolk</span>
          </div>
        </div>
        <div class="flip-card-back">
          <h4>Jax</h4>
          <i>Princess</i>
          <p class="p-1" style="font-size: 0.9rem;">Description/Bio</p>
        </div>
      </div>
    </div> 

    <div class="flip-card m-2 ormican touched-kin">
      <div class="flip-card-inner">
        <div class="flip-card-front">
          <img src="https://via.placeholder.com/380x300.png?text=Jade" style="height: 380px; width: 300px;" >
          <span class="character-name">Jade</span>
          <div class="character-tag text-center">
            <span class="badge badge-secondary">Ormican</span>
            <span class="badge badge-info">Touched-kin</span>
          </div>
        </div>
        <div class="flip-card-back">
          <h4>Jade</h4>
          <p class="p-1" style="font-size: 0.9rem;">Description/Bio</p>
        </div>
      </div>
    </div> 

    <div class="flip-card m-2 TRIBE RACE">
      <div class="flip-card-inner">
        <div class="flip-card-front">
          <img src="https://via.placeholder.com/380x300.png?text=Character" style="height: 380px; width: 300px;" >
          <span class="character-name">Name</span>
          <div class="character-tag text-center">
            <span class="badge badge-secondary">Tribe</span>
            <span class="badge badge-info">Race</span>
          </div>
        </div>
        <div class="flip-card-back">
          <h4>Full Name</h4>
          <i>Title(s)</i>
          <p class="p-1" style="font-size: 0.9rem;">Description/Bio</p>
        </div>
      </div>
    </div> 

    <!-- <div class="flip-card m-2 TRIBE RACE">
      <div class="flip-card-inner">
        <div class="flip-card-front">
          <img src="https://via.placeholder.com/380x300.png?text=Character" style="height: 380px; width: 300px;" >
          <span class="character-name">Name</span>
          <div class="character-tag text-center">
            <span class="badge badge-secondary">Tribe</span>
            <span class="badge badge-info">Race</span>
          </div>
        </div>
        <div class="flip-card-back">
          <h4>Full Name</h4>
          <i>Title(s)</i>
          <p class="p-1" style="font-size: 0.9rem;">Description/Bio</p>
        </div>
      </div>
    </div>  -->

  </div>
 
    <!-- </div> -->
    
    <!-- <footer class="text-right">©2020 Michael Baglio.</footer> -->

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script>



  $(document).ready(function() {
    var check = $(".btn-tag");
    var cards = $('.flip-card');
    var andOrBtn = $('.andOr-btn');
    var activeFilters = [];

    $("#name-filter").on("keyup", function() {
          var visibleCards = $('.flip-card:visible .character-name');
          var value = $(this).val().toLowerCase();
          if (!$(this).val()) {
            cards.hide();        
            if (activeFilters.length == 0) {
              cards.show();
            } else if ($('#and').hasClass('active')) {
              for (const card of cards) {
                let filterCheck = true;
                console.log(activeFilters);
                activeFilters.forEach(filter =>{
                  if (!card.className.includes(filter.slice(1))) {
                    filterCheck = false;
                  }
                });
                if (filterCheck) {
                  $(card).show();
                }
              }
            } else {
              activeFilters.forEach(filter => {
                $(filter).show(); 
              });
            } 
          } else {
            for (const card of visibleCards) {
              if (!($(card).text().toLowerCase().indexOf(value) > -1)) {
              $(card.parentNode.parentNode.parentNode).hide();
              }
            }
          }
        });

    $('.reset-btn').click(function(eventObject){
        activeFilters = [];
        for (const btn of check) {
          if (btn.className.includes('active')) {
            $(btn).toggleClass('active');
          }
        }
        if (!$('#or').hasClass('active')) {
          $('#or').toggleClass('active');
          $('#and').removeClass('active');
        }
        $('#name-filter').val("");
        cards.show();
    });

    andOrBtn.click(function(eventObject){
      for (const btn of andOrBtn) {
        if(btn.className.includes('active')) {
            $(btn).toggleClass('active');
          } 
      }
            cards.hide();        
            if (activeFilters.length == 0) {
              cards.show();
            } else if (eventObject.target.id == 'and') {
              for (const card of cards) {
                let filterCheck = true;
                console.log(activeFilters);
                activeFilters.forEach(filter =>{
                  if (!card.className.includes(filter.slice(1))) {
                    filterCheck = false;
                  }
                });
                if (filterCheck) {
                  $(card).show();
                }
              }
            } else {
              activeFilters.forEach(filter => {
                $(filter).show(); 
              });
            } 
    });

    check.click(function(eventObject){
      cards.hide();        
      var filter = "." + eventObject.target.id;
      
      if (eventObject.target.className.includes('active')) {
        activeFilters.splice(activeFilters.indexOf(filter), 1);
      } else {
        activeFilters.push(filter);
      }

      if (activeFilters.length == 0) {
        cards.show();
      } else if ($('#and').hasClass('active')) {
        for (const card of cards) {
          let filterCheck = true;
          activeFilters.forEach(filter =>{
            if (!card.className.includes(filter.slice(1))) {
              filterCheck = false;
            }
          });
          if (filterCheck) {
            $(card).show();
          }
        }
      } else {
        activeFilters.forEach(filter => {
          $(filter).show(); 
        });
      }   
    });
  });

    </script>
</body>
</html>